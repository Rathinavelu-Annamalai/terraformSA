{"source":2,"revision":5,"description":null,"createdBy":{"displayName":"Poorani Kamalakannan","url":"https://spsprodcus2.vssps.visualstudio.com/A16476ecb-693f-414f-b360-9888e2e983a6/_apis/Identities/11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","_links":{"avatar":{"href":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"}},"id":"11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","uniqueName":"pooranikamalakannan@allianzlife.com","imageUrl":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz","descriptor":"aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"},"createdOn":"2022-10-20T06:20:05.983Z","modifiedBy":{"displayName":"Poorani Kamalakannan","url":"https://spsprodcus2.vssps.visualstudio.com/A16476ecb-693f-414f-b360-9888e2e983a6/_apis/Identities/11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","_links":{"avatar":{"href":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"}},"id":"11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","uniqueName":"pooranikamalakannan@allianzlife.com","imageUrl":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz","descriptor":"aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"},"modifiedOn":"2022-10-20T09:37:30.767Z","isDeleted":false,"lastRelease":{"id":3239,"name":"Release-12","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":178,"projectReference":null,"_links":{}},"createdOn":"2022-10-20T11:04:15.627Z","createdBy":{"displayName":"Poorani Kamalakannan","url":"https://spsprodcus2.vssps.visualstudio.com/A16476ecb-693f-414f-b360-9888e2e983a6/_apis/Identities/11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","_links":{"avatar":{"href":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"}},"id":"11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","uniqueName":"pooranikamalakannan@allianzlife.com","imageUrl":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz","descriptor":"aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"}},"variables":{"appservicename":{"value":"pulterraformweb9744cb2a"},"appserviceplan":{"value":"PULTerraformplan"},"storagekey":{"value":"PipelineWillGetThisValueRuntime"},"terraformstorageaccount":{"value":"terraformstorage9744cb2a"},"terraformstoragerg":{"value":"terraformrg"}},"variableGroups":[],"environments":[{"id":324,"name":"Dev","rank":1,"owner":{"displayName":"Poorani Kamalakannan","url":"https://spsprodcus2.vssps.visualstudio.com/A16476ecb-693f-414f-b360-9888e2e983a6/_apis/Identities/11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","_links":{"avatar":{"href":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"}},"id":"11e07dfc-6ecb-6d50-aa5e-c8ec13c3f113","uniqueName":"pooranikamalakannan@allianzlife.com","imageUrl":"https://dev.azure.com/AIM-LE-DEV-Plutus/_apis/GraphProfile/MemberAvatars/aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz","descriptor":"aad.MTFlMDdkZmMtNmVjYi03ZDUwLWFhNWUtYzhlYzEzYzNmMTEz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":978}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":979},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":980}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"windows-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":151,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"1.*","name":"Azure CLI to deploy required Azure resources","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"# this will create Azure resource group\ncall az group create --location westus --name $(terraformstoragerg)\n\ncall az storage account create --name $(terraformstorageaccount) --resource-group $(terraformstoragerg) --location westus --sku Standard_LRS\n\ncall az storage container create --name terraform --account-name $(terraformstorageaccount)\n\ncall az storage account keys list -g $(terraformstoragerg) -n $(terraformstorageaccount)\n\n","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"3.*","name":"Azure PowerShell script to get the storage key","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","ScriptType":"InlineScript","ScriptPath":"","Inline":"# Using this script we will fetch storage key which is required in terraform file to authenticate backend storage account\n\n$key=(Get-AzureRmStorageAccountKey -ResourceGroupName $(terraformstoragerg) -AccountName $(terraformstorageaccount)).Value[0]\n\nWrite-Host \"##vso[task.setvariable variable=storagekey]$key\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"LatestVersion","CustomTargetAzurePs":""}},{"environment":{},"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"5.*","name":"Replace tokens in terraform file","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"rootDirectory":"","targetFiles":"**/*.tf","encoding":"auto","tokenPattern":"custom","tokenPrefix":"__","tokenSuffix":"__","writeBOM":"true","escapeType":"none","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","actionOnNoFiles":"continue","enableTransforms":"false","transformPrefix":"(","transformSuffix":")","variableFiles":"","inlineVariables":"","variableSeparator":".","enableRecursion":"false","useLegacyPattern":"false","useLegacyEmptyFeature":"true","useDefaultValue":"false","emptyValue":"(empty)","defaultValue":"","enableTelemetry":"true"}},{"environment":{},"taskId":"a4789e5d-f6e8-431f-add9-379d640a883c","version":"0.*","name":"Install Terraform 0.12.3","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"terraformVersion":"0.12.3"}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"init","workingDirectory":"$(System.DefaultWorkingDirectory)/_Terraformtesting/Terraform","commandOptions":"","environmentServiceNameAzureRM":"","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","backendAzureRmResourceGroupName":"$(terraformstoragerg)","backendAzureRmStorageAccountName":"$(terraformstorageaccount) ","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"plan","workingDirectory":"$(System.DefaultWorkingDirectory)/_Terraformtesting/Terraform","commandOptions":"","environmentServiceNameAzureRM":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"","backendAzureRmResourceGroupName":"$(terraformstoragerg)","backendAzureRmStorageAccountName":"$(terraformstorageaccount) ","backendAzureRmContainerName":"terraform","backendAzureRmKey":"$(storagekey)","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : apply -auto-approve","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"apply","workingDirectory":"$(System.DefaultWorkingDirectory)/_Terraform-CI/drop/Terraform","commandOptions":"-auto-approve","environmentServiceNameAzureRM":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"","backendAzureRmResourceGroupName":"$(terraformstoragerg)","backendAzureRmStorageAccountName":"$(terraformstorageaccount) ","backendAzureRmContainerName":"terraform","backendAzureRmKey":"$(storagekey)","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"3.*","name":"Azure App Service Deploy: $(appservicename)","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"28ab44f6-6b58-4390-bca0-abd0ea0f101a","WebAppKind":"app","WebAppName":"$(appservicename)","DeployToSlotFlag":"false","ResourceGroupName":"","SlotName":"","ImageSource":"Registry","AzureContainerRegistry":"","AzureContainerRegistryLoginServer":"","AzureContainerRegistryImage":"","AzureContainerRegistryTag":"","DockerRepositoryAccess":"public","RegistryConnectedServiceName":"","PrivateRegistryImage":"","PrivateRegistryTag":"","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/**/*.zip","BuiltinLinuxPackage":"$(System.DefaultWorkingDirectory)/**/*.zip","RuntimeStack":"","StartupCommand":"","WebAppUri":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","GenerateWebConfig":"false","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","TakeAppOfflineFlag":"false","UseWebDeploy":"false","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"false","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":3239,"url":"https://vsrm.dev.azure.com/AIM-LE-DEV-Plutus/d254abf1-d9f1-49ef-8da5-60d9e0674ddb/_apis/Release/releases/3239","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/AIM-LE-DEV-Plutus/_apis/public/Release/badge/d254abf1-d9f1-49ef-8da5-60d9e0674ddb/178/324"}],"artifacts":[{"sourceId":"d254abf1-d9f1-49ef-8da5-60d9e0674ddb:580","type":"Build","alias":"_Terraform-CI-import","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/AIM-LE-DEV-Plutus/_permalink/_build/index?collectionId=3e28f047-f803-4da8-847f-5a1f7787d542&projectId=d254abf1-d9f1-49ef-8da5-60d9e0674ddb&definitionId=580","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"580","name":"Terraform-CI-import"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"d254abf1-d9f1-49ef-8da5-60d9e0674ddb","name":"AIM Automated Provisioning"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false},{"sourceId":"d254abf1-d9f1-49ef-8da5-60d9e0674ddb:0f1619a5-41a6-4d72-929c-87c5bd4ac707","type":"Git","alias":"_Terraformtesting","definitionReference":{"branches":{"id":"teraformtest","name":"teraformtest"},"checkoutNestedSubmodules":{"id":"True","name":"Any nested submodules within"},"checkoutSubmodules":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionType":{"id":"latestFromBranchType","name":"Latest from the default branch"},"definition":{"id":"0f1619a5-41a6-4d72-929c-87c5bd4ac707","name":"Terraformtesting"},"fetchDepth":{"id":"","name":""},"gitLfsSupport":{"id":"","name":""},"project":{"id":"d254abf1-d9f1-49ef-8da5-60d9e0674ddb","name":"AIM Automated Provisioning"}},"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseImport"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":178,"name":"Terraform-CD - Copy","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/AIM-LE-DEV-Plutus/d254abf1-d9f1-49ef-8da5-60d9e0674ddb/_apis/Release/definitions/178","_links":{"self":{"href":"https://vsrm.dev.azure.com/AIM-LE-DEV-Plutus/d254abf1-d9f1-49ef-8da5-60d9e0674ddb/_apis/Release/definitions/178"},"web":{"href":"https://dev.azure.com/AIM-LE-DEV-Plutus/d254abf1-d9f1-49ef-8da5-60d9e0674ddb/_release?definitionId=178"}}}